var userhome="/root";
var UserHomePath="/root";
var PORTALNAM="serial";
var PORTALTYPE="basic";
var portal_version="20130412";
+ main
+ source /etc/profile.d/dawning.sh
++ GRIDVIEW_HOME=/opt/gridview/
++ JOBSCHEDULE_HOME=/opt/gridview//pbs
++ MANAGER_HOME=/opt/gridview//pbs/dispatcher
++ SCHEDULER_HOME=/opt/gridview//pbs/dispatcher-sched
++ export LD_LIBRARY_PATH=/opt/gridview//pbs/dispatcher/lib:/opt/gridview//pbs/dispatcher/lib:::/opt/gridview//pbs/dispatcher/lib::
++ LD_LIBRARY_PATH=/opt/gridview//pbs/dispatcher/lib:/opt/gridview//pbs/dispatcher/lib:::/opt/gridview//pbs/dispatcher/lib::
++ export PATH=/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/gridview//pbs/dispatcher-sched/bin:/opt/gridview//pbs/dispatcher-sched/sbin:/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/clusconf/bin:/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/usr/lib/mit/bin:/usr/lib/mit/sbin
++ PATH=/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/gridview//pbs/dispatcher-sched/bin:/opt/gridview//pbs/dispatcher-sched/sbin:/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/clusconf/bin:/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/usr/lib/mit/bin:/usr/lib/mit/sbin
++ export PATH=/opt/gridview//pbs/dispatcher-sched/bin:/opt/gridview//pbs/dispatcher-sched/sbin:/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/gridview//pbs/dispatcher-sched/bin:/opt/gridview//pbs/dispatcher-sched/sbin:/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/clusconf/bin:/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/usr/lib/mit/bin:/usr/lib/mit/sbin
++ PATH=/opt/gridview//pbs/dispatcher-sched/bin:/opt/gridview//pbs/dispatcher-sched/sbin:/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/gridview//pbs/dispatcher-sched/bin:/opt/gridview//pbs/dispatcher-sched/sbin:/opt/gridview//pbs/dispatcher/bin:/opt/gridview//pbs/dispatcher/sbin:/opt/clusconf/bin:/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/usr/lib/mit/bin:/usr/lib/mit/sbin
++ export MANPATH=/opt/gridview//pbs/dispatcher/man:/opt/gridview//pbs/dispatcher/man:/usr/share/man:/usr/local/man
++ MANPATH=/opt/gridview//pbs/dispatcher/man:/opt/gridview//pbs/dispatcher/man:/usr/share/man:/usr/local/man
++ date +%Y%m%d_%H%M%S
+ export QTIMESTAMP=20131122_135236
+ QTIMESTAMP=20131122_135236
+ export 'DOLLAR=$'
+ DOLLAR='$'
+ define_temp_file
+ QTMPDIR=/tmp/queroot20131122_135236
+ mkdir -p /tmp/queroot20131122_135236
+ chmod 777 /tmp/queroot20131122_135236
+ QUEDIAGN=/tmp/queroot20131122_135236/queueDiagN20131122_135236
+ QUEDIAGT=/tmp/queroot20131122_135236/queueDiagT20131122_135236
+ QUERATE=/tmp/queroot20131122_135236/queueRate20131122_135236
+ get_check_config
+ source /opt/gridview/gridviewAppTemplate/basic/serial/../../CommonConf.setting
++ nfs_quota_available=1
++ nfs_root_squash=1
++ nfs_quota_filesystem=node22:/home
++ queue_default=I_cb60
++ nnodes_default=1
++ ppn_default=12
++ hours_default=1
++ mpi_default=intelmpi
++ mpi_list=openmpi:intelmpi:mvapich2:cr_mpi:mpich2
++ ib_available=1
++ vnc_available=1
++ checkpoint_availabel=1
++ checkpoint_default=0
++ interval_default=240
++ min_interval=5
++ openmpi_ENVFILE=/public/software/profile.d/ompi142-intel-env.sh
++ intelmpi_ENVFILE=/public/software/profile.d/impi-env.sh
++ mpich2_ENVFILE=/opt/soft/mpi/mpich2-1.4-gnu.sh
++ cr_mpi_ENVFILE=/checkpoints/bin/cr_vars.sh
++ mvapich2_ENVFILE=/opt/soft/mpi/mvapich2-1.7-gnu.sh
++ debug=1
+ source /opt/gridview/gridviewAppTemplate/basic/serial/serial.setting
++ version=20130412
++ nfs_quota_available=0
++ nfs_root_squash=1
++ nfs_quota_filesystem=node22:/home
++ queue_default=test
++ nnodes_default=1
+++ echo serial
+++ tr '[A-Z]' '[a-z]'
++ name_prefix=serial
++ hours_default=1
+++ echo serial
+++ tr '[A-Z]' '[a-z]'
++ output_prefix=serial
++ prog_default=hostname
++ prog_list=hostname:
++ programarg_default=' '
++ vnc_available=1
++ checkpoint_availabel=1
++ interval_default=240
++ min_interval=5
++ debug=1
+ '[' -f /.clusportal/serial.setting ']'
+ PORTALUSERCNF=/tmp/queroot20131122_135236/serial20131122_135236
+ /bin/su - root -c 'if [ -f $HOME/.gv_portal/serial.setting ];then cat $HOME/.gv_portal/serial.setting; fi'
+ source /tmp/queroot20131122_135236/serial20131122_135236
+ get_clusquota_info
+ touch /tmp/queroot20131122_135236/queueRate20131122_135236
+ /opt/gridview/clusquota/bin/goldsh ChargeRate Query
+ grep 'NBM  Queue'
+ '[' 0 -eq 0 ']'
++ awk '{print $7}'
++ /opt/gridview/clusquota/bin/cqlist -u root
++ tail -n1
+ varUserCqSec=358777103
+ '[' -z 358777103 ']'
+ let varUserCqHour=358777103/3600
+ echo 'var dUserCqSec=358777103;'
var dUserCqSec=358777103;
+ echo 'var dUserCqHour=99660;'
var dUserCqHour=99660;
+ echo 'var clusquota_available=1;'
var clusquota_available=1;
+ get_all_queue_info
++ awk '{print $3}'
++ qmgr -c 'p s'
++ grep 'create queue'
+ queList='testrate
batch
low
middle
high
aaaaaaaaaabbbbc
testvxc
testtest
queue'
+ queAcceList='['
+ all_queue_stat
+ i=0
+ j=0
+ /opt/gridview/pbs/dispatcher-sched/bin/diagnose -n -v
+ /opt/gridview/pbs/dispatcher-sched/bin/diagnose -t
+ echo -n 'var aQueStat=['
var aQueStat=[+ for queName in '$queList'
+ let i=0+1
++ grep testrate /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep testrate /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep testrate /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Ftestrate '{print $2}'
++ head -n1
+ queFreeCore=
++ grep testrate /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep testrate /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w testrate /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 testrate
++ grep resources_max.nodect /tmp/queroot20131122_135236/testrate.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/testrate.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/testrate.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/testrate.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/testrate.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/testrate.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/testrate.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/testrate.conf
++ grep root
+ '[' -z '' ']'
+ queAcceIs=false
+ '[' false == true ']'
+ '[' 1 -gt 1 ']'
+ echo -n '[1,'\''testrate'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''false'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[1,'testrate','0','0','0','','1','false','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=1+1
++ grep batch /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep -v Drained
++ grep '^0:'
++ wc -l
++ grep batch /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ awk '{print $3}'
+ queBusyNodes=0
++ grep batch /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Fbatch '{print $2}'
++ head -n1
+ queFreeCore=
++ grep batch /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep batch /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w batch /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 batch
++ grep resources_max.nodect /tmp/queroot20131122_135236/batch.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/batch.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/batch.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/batch.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/batch.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/batch.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/batch.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/batch.conf
++ grep root
+ '[' -z '' ']'
+ queAcceIs=false
+ '[' false == true ']'
+ '[' 2 -gt 1 ']'
+ echo -n ,
,+ echo -n '[2,'\''batch'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''false'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[2,'batch','0','0','0','','1','false','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=2+1
++ grep low /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep low /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep low /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Flow '{print $2}'
++ head -n1
+ queFreeCore=
++ grep low /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep low /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w low /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 low
++ grep resources_max.nodect /tmp/queroot20131122_135236/low.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/low.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/low.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/low.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/low.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/low.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/low.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/low.conf
++ grep root
+ '[' -z '    acl_users = Local11,abab1212,cheng123,cheng678,chengc,chenghm,chenghm001,chenghm01,chengopt,chengtest1,dcba,eeeee,eeeee1,frfrfrfrfr,hijk,jobtestuser1,jobtestuser2,liyuan1024,liyuan123,lmn,localCheng1,localchenghm,lvzhh,menghr,nobody,open,postcq,qqqqqq,root,test11111,test1115,test12,testex,testjob,testlocal,testreg,wqqee,wwwwww,xyz,yuanshuai11,yuanshuai123,zhanghaog1,zhanghaog2,zhangjinfeng,zhangwl,zhangwl03,zhjinfeng' ']'
+ queAcceIs=true
+ '[' true == true ']'
+ '[' 0 -gt 0 ']'
+ queAcceList='[["low"]'
+ let j=0+1
+ '[' 3 -gt 1 ']'
+ echo -n ,
,+ echo -n '[3,'\''low'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''true'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[3,'low','0','0','0','','1','true','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=3+1
++ grep middle /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep middle /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep middle /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Fmiddle '{print $2}'
++ head -n1
+ queFreeCore=
++ grep middle /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep middle /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ awk -F: '{print $2}'
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
+ queMaxMem=
++ grep -w middle /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 middle
++ grep resources_max.nodect /tmp/queroot20131122_135236/middle.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/middle.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/middle.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/middle.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/middle.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/middle.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/middle.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/middle.conf
++ grep root
+ '[' -z '    acl_users = Local11@*,bin@*,chenghm001@*,chenghm@*,chengtest1@*,dcba@*,eeeee@*,ftp@*,games@*,haldaemon@*,jobtestuser2@*,ldap@*,liyuan123@*,localCheng1@*,lvzhh@*,nobody@*,ntp@*,open@*,polkituser@*,root@*,suse-ncc@*,test11111@*,uucp@*,uuidd@*,wangliang@*,wwwrun@*' ']'
+ queAcceIs=true
+ '[' true == true ']'
+ '[' 1 -gt 0 ']'
+ queAcceList='[["low"],["middle"]'
+ '[' 4 -gt 1 ']'
+ echo -n ,
,+ echo -n '[4,'\''middle'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''true'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[4,'middle','0','0','0','','1','true','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=4+1
++ grep high /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep high /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep high /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Fhigh '{print $2}'
++ head -n1
+ queFreeCore=
++ grep high /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep high /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w high /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 high
++ grep resources_max.nodect /tmp/queroot20131122_135236/high.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/high.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/high.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/high.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/high.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/high.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/high.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/high.conf
++ grep root
+ '[' -z '    acl_users = Local11@*,bin@*,chenghm001@*,chenghm@*,chengtest1@*,dcba@*,eeeee@*,ftp@*,games@*,haldaemon@*,jobtestuser2@*,ldap@*,liyuan123@*,localCheng1@*,lvzhh@*,nobody@*,ntp@*,open@*,polkituser@*,root@*,suse-ncc@*,test11111@*,uucp@*,uuidd@*,wangliang@*,wwwrun@*,zhangwl01@*' ']'
+ queAcceIs=true
+ '[' true == true ']'
+ '[' 1 -gt 0 ']'
+ queAcceList='[["low"],["middle"],["high"]'
+ '[' 5 -gt 1 ']'
+ echo -n ,
,+ echo -n '[5,'\''high'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''true'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[5,'high','0','0','0','','1','true','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=5+1
++ grep aaaaaaaaaabbbbc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep aaaaaaaaaabbbbc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep aaaaaaaaaabbbbc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Faaaaaaaaaabbbbc '{print $2}'
++ head -n1
+ queFreeCore=
++ grep aaaaaaaaaabbbbc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep aaaaaaaaaabbbbc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w aaaaaaaaaabbbbc /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=
+ '[' -z ']'
+ queChargeRate=1.0
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 aaaaaaaaaabbbbc
++ grep resources_max.nodect /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/aaaaaaaaaabbbbc.conf
++ grep root
+ '[' -z '' ']'
+ queAcceIs=false
+ '[' false == true ']'
+ '[' 6 -gt 1 ']'
+ echo -n ,
,+ echo -n '[6,'\''aaaaaaaaaabbbbc'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1.0'\'','\''false'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[6,'aaaaaaaaaabbbbc','0','0','0','','1.0','false','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=6+1
++ grep testvxc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep testvxc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep testvxc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Ftestvxc '{print $2}'
++ head -n1
+ queFreeCore=
++ grep testvxc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep testvxc /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w testvxc /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 testvxc
++ grep resources_max.nodect /tmp/queroot20131122_135236/testvxc.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/testvxc.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ awk '{print $3}'
++ grep resources_max.ncpus /tmp/queroot20131122_135236/testvxc.conf
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ awk '{print $3}'
++ grep resources_min.ncpus /tmp/queroot20131122_135236/testvxc.conf
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/testvxc.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/testvxc.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/testvxc.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/testvxc.conf
++ grep root
+ '[' -z '' ']'
+ queAcceIs=false
+ '[' false == true ']'
+ '[' 7 -gt 1 ']'
+ echo -n ,
,+ echo -n '[7,'\''testvxc'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''false'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[7,'testvxc','0','0','0','','1','false','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=7+1
++ grep testtest /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep testtest /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep testtest /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Ftesttest '{print $2}'
++ head -n1
+ queFreeCore=
++ grep testtest /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
++ awk -F: '{print $2}'
+ queMaxPPN=
++ grep testtest /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w testtest /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 testtest
++ grep resources_max.nodect /tmp/queroot20131122_135236/testtest.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/testtest.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/testtest.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/testtest.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/testtest.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/testtest.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/testtest.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/testtest.conf
++ grep root
+ '[' -z '' ']'
+ queAcceIs=false
+ '[' false == true ']'
+ '[' 8 -gt 1 ']'
+ echo -n ,
,+ echo -n '[8,'\''testtest'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''false'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[8,'testtest','0','0','0','','1','false','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ for queName in '$queList'
+ let i=8+1
++ grep queue /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
+ queNodes=0
++ grep queue /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ grep '^0:'
++ wc -l
++ grep -v Drained
++ awk '{print $3}'
+ queBusyNodes=0
++ grep queue /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ wc -l
++ grep Idle
+ queFreeNodes=0
++ tail -n2 /tmp/queroot20131122_135236/queueDiagT20131122_135236
++ awk -F: '{print $1}'
++ awk -Fqueue '{print $2}'
++ head -n1
+ queFreeCore=
++ awk -F: '{print $2}'
++ grep queue /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $3}'
+ queMaxPPN=
++ grep queue /tmp/queroot20131122_135236/queueDiagN20131122_135236
++ find_max
++ awk '{if(max==""){max=$1}; if($1!="" && $1>max) {max=$1};} END {print max}'
++ awk '{print $4}'
++ awk -F: '{print $2}'
+ queMaxMem=
++ grep -w queue /tmp/queroot20131122_135236/queueRate20131122_135236
++ awk '{print $4}'
+ queChargeRate=1
+ '[' -z 1 ']'
+ /opt/gridview/pbs/dispatcher/bin/qstat -Qf1 queue
++ grep resources_max.nodect /tmp/queroot20131122_135236/queue.conf
++ awk '{print $3}'
+ queMaxNodect=
+ '[' -z '' ']'
+ queMaxNodect=unlimit
++ grep resources_min.nodect /tmp/queroot20131122_135236/queue.conf
++ awk '{print $3}'
+ queMinNodect=
+ '[' -z '' ']'
+ queMinNodect=unlimit
++ grep resources_max.ncpus /tmp/queroot20131122_135236/queue.conf
++ awk '{print $3}'
+ queMaxNcpus=
+ '[' -z '' ']'
+ queMaxNcpus=unlimit
++ grep resources_min.ncpus /tmp/queroot20131122_135236/queue.conf
++ awk '{print $3}'
+ queMinNcpus=
+ '[' -z '' ']'
+ queMinNcpus=unlimit
++ grep resources_max.walltime /tmp/queroot20131122_135236/queue.conf
++ awk '{print $3}'
+ queMaxWalltime=
+ '[' -z '' ']'
+ queMaxWalltime=unlimit
++ grep resources_min.walltime /tmp/queroot20131122_135236/queue.conf
++ awk '{print $3}'
+ queMinWalltime=
+ '[' -z '' ']'
+ queMinWalltime=unlimit
++ grep 'acl_user_enable = True' /tmp/queroot20131122_135236/queue.conf
+ '[' -z '    acl_user_enable = True' ']'
++ grep acl_users /tmp/queroot20131122_135236/queue.conf
++ grep root
+ '[' -z '' ']'
+ queAcceIs=false
+ '[' false == true ']'
+ '[' 9 -gt 1 ']'
+ echo -n ,
,+ echo -n '[9,'\''queue'\'','\''0'\'','\''0'\'','\''0'\'','\'''\'','\''1'\'','\''false'\'','\'''\'','\'''\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'','\''unlimit'\'']'
[9,'queue','0','0','0','','1','false','','','unlimit','unlimit','unlimit','unlimit','unlimit','unlimit']+ echo '];'
];
+ queAcceList='[["low"],["middle"],["high"]]'
+ echo 'var aQueList=[["low"],["middle"],["high"]];'
var aQueList=[["low"],["middle"],["high"]];
++ grep test
++ echo '[["low"],["middle"],["high"]]'
+ '[' -z ']'
++ awk '-F"' '{print $2}'
++ echo '[["low"],["middle"],["high"]]'
+ queAcceFirst=low
+ echo 'var queSelected="low";'
var queSelected="low";
+ get_diskquota_info
+ '[' 0 -eq 1 ']'
+ echo 'var diskfilesystem=null;'
var diskfilesystem=null;
+ echo 'var diskused="0";'
var diskused="0";
+ echo 'var disklimits="0";'
var disklimits="0";
+ echo 'var disklimitsgb="0";'
var disklimitsgb="0";
+ echo 'var diskquota_available=0;'
var diskquota_available=0;
+ get_portal_default
+ echo 'var numnodes="1";'
var numnodes="1";
+ echo 'var numppn="12";'
var numppn="12";
+ echo 'var name="serial";'
var name="serial";
+ echo 'var hours="1";'
var hours="1";
+ echo 'var minutes="0";'
var minutes="0";
+ echo 'var seconds="0";'
var seconds="0";
+ echo 'var vnc_available="1";'
var vnc_available="1";
+ echo 'var vnc="0";'
var vnc="0";
+ echo 'var checkpoint_available="1";'
var checkpoint_available="1";
+ echo 'var checkpoint="0";'
var checkpoint="0";
+ echo 'var checkpoint_def="0";'
var checkpoint_def="0";
+ echo 'var interval="240";'
var interval="240";
+ echo 'var interval_def="240";'
var interval_def="240";
+ echo 'var min_interval="5";'
var min_interval="5";
+ echo 'var current_time="20131122_135236";'
var current_time="20131122_135236";
+ rm -rf /tmp/queroot20131122_135236
var program="hostname";
var proglist="hostname:";
var s_prog=proglist.split(":");
var programarg=" ";
var workdir=userhome;
var output="serial";
